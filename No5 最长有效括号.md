# No 5 最长有效括号

**题目表述**

给定一个包含 ’ ( ‘ 和 ' ) ' 的字符串,找出最长的包含有效括号的子串长度。

**示例1：**

~~~java
输入："(()"
输出: 2
解释：最长有效括号字串为"()"
~~~

**示例2：**

~~~java
输入：")()())"
输出： 4
解释：最长有效括号子串为"()()"
~~~

**方法一：动态规划**

**思路及算法**

定义$dp[i]$表示以下$i$字符结尾的最长有效括号的长度。我们将$dp$数组全部初始化为0。显然有效的子串一定以**右括号**结尾，因此我们可以知道以**左括号**结尾的子串对应的$dp$必定为0，我们只需求解**右括号**在$dp$数组中对应位置的值。

我们从前往后遍历字符串求解$dp$值，我们每两个字符串检查一次：

1. 如果前后两个字符满足一组括号

   ~~~java
   if(s[i] == ')' && s[i-1] == '('){
       //如果i大于等于2 i处最长的有效括号子串长度为 2+dp[i-2]
       dp[i] = (i >= 2 ? dp[i-2] : 0) + 2；
   }
   ~~~

   

2. 如果前后两个字符都是右括号

   ~~~java
   //如果i处的括号为左括号 那么i处的dp[i] = 0
   if(s[i] == '('){
       dp[i] = 0;
   }
   if(s[i] == ')' && s[i - dp[i-1] -1] == '('){
       //如果i处的字符为右括号 那么查看该字符最前面一个非子串字符是否为左括号
       dp[i] = dp[i-1] + ((i - dp[i-1]) >=2 ? dp[i - dp[i-1] -2] : 0) + 2;
   }
   ~~~

   
